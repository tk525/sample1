アルゴリズムは色付きマーカー
何らかの原因により本実装ができず、仮実装をしている奴は★
既に出来上がった機能への追加機能はこのマーカー
・<<急務>> 性格診断とか、データが１つで良いものはupdateスタイルにしていく
・sample/x2/x3の中身をより細かく分類する必要がある（人を励ましてるor己のことをただ単に言っているだけかetc）
・sample/recommend_concreteの詳細を暇な時にggり倒せよう
・sample/calm_the_mind_pgとアンガーマネジメントも心のレベルで提案を変えてみるのはどうか？
データベースはuser_id（ipアドレス）で紐付けしている



[Level1 初期は文字は最小限 -free]
・愚痴聞きAI-beginner 入力されたテキストから、病み度判定
  テキストデータの処理→病み度スコア化→合計で一定条件満たしたらnextステップ？
  病み度スコアは最悪貧弱モードの性格を考慮した上で判定する。ラインは80/100?
  postgreで、IDはIPアドレスで作成。L2までIDを引継ぎする
  重要な単語のオウム返し＋mindを上げる発言をする knn
★Knnにしたが、ナイーブの方が適切だと思われるので再度検討すること
 ついでに、LInearSVCしたっけ？
   理解・共感→感想→提案
    「理解・共感」new_testerの重さを可視化して、線形で分断し、低い値の物たちを使用する。頻出度をL1、線形で線を引く？
      ★「感想」一番低い特徴量を選択、適当な文章を作成する。参考文書はsampleから使いたいな...
        本実装では、自然言語処理の知識が必要。
        仮実装は同じ文字数で返すミラーリング法を使う。K近傍で、新規データの文字数を新規データポイントとし、encouraging.xlsxの文字数たち→sample/enco_list.xlsx(Xを文字数、Yを配列番号と仮説)と照合？

✅継続してappを使えているか(ログボ
    ただサイトを起動しただけでも、大きな一歩とカウントしたいので別にDBを設置する
    ログボで3こで課金1つ解除
      サイトを開いた時点でIP奪取＋タイムスタンプで仮DB？



[Level2 ある程度元気な状態になったら他の機能紹介 -free] [0~80%]
l1_userにテキスト内容も挿入できるように変更
l2_aiに愚痴聞きトータルスコアを引き継ぎできるように、personal_scoreでclass化
l1_loginにすでにログインしていたら、DB挿入を無視するように追記
✅性格診断 LinearSVC+knn
	鬱になりやすい性格を集めて、ランダムフォレストはどうか？ knnになりました
	データベースに挿入(ip、診断結果(0と1の)、性格スコア)
★0~30/30~70/70~100と事前に分割下が、それを#凝集型クラスタリングで調整するのはどうか？

✅愚痴聞きAI-standard 入力されたテキストから、病み度判定＋具体的な解決方法提案
  テキストデータの処理→病み度スコア化→一定条件満たしたらnextステップ？80%
    病み度スコアは性格両診断を考慮した上で判定する。数値爆上げせずに、分散させる
  提案1stはなし、2ndからはアルゴリズム予想で提案リストを参照し、提案
    性格診断でオススメ対処法を全て参照、発言診断で病みが低ければ全て/多ければ削るスタイルその選択肢をいくつの中でランダムに１つ選択し、それ提案とする。
    性格診断 ベースデータを#凝集型クラスタリング→PCA、線形他くらす or knnDBSCAN? 診断による結果から、recommend言葉(sample/recommend_concrete)を探す。
★性格＋発言からベストな方法が見つからないので削るタイプしかできなかった。もっと良い案があるはず

✅日記/メンタルヘルス 記録-beginner  数値記録のみポジティブなコメントがつく(強制するような発言ナシ
  「数値」  自分で今の気持ちを記録するようにする。５段階評価。
    ポジティブなマインドになるコメントを付ける。
      未来予想＞過去予測だったら、great！未来＜過去good！の優良可スタイル
      PCA  長さ/濃さバラバラの５段階サンプルを作成？
      Linear regression(線形回帰)  特徴量と配列番号を使って回帰するなら、配列番号をX、Yに特徴量を入れる。predictでXつまり配列番号を指定し、Yの値を予測させるのがベストかも
  「日記」  画像投稿可能、ただし１枚。文字数250

✅最終目標とその目標への段階的な目標を作れる  継続app使用から、実世界での継続に切り替える
  愚痴聞きが50%あたりで質問する→75%で具体的に何をすれば良いかを考えさせる
    例)旅行、諦めていた目標に取り組む、より良い人間関係を築く、自身を改善する

・鬱対策  テキスト参照



[Level3  さらに元気になったら提案 -lease $1~/month] [80%~100%]
l1_userに汚い単語を使った回数を入れれるようにカラム追加
l1_aiのDB挿入時に汚い単語を使った回数を引き継げるようにDB編集

✅前提  ユーザー登録機能  ラスト

  もしl3ユーザーであればl3の機能を通過させるようにする
  l1で仮作成したデータベース(l1_user / l1_login)をまとめて、本データベース(l2_user)に移行する。守るポイントを１つに絞るため。絶対に守らないといけないやつを絞る。＋暗号化
  ＋ユーザー名、生年月日、メールアドレス、電話番号、クレカ、
  ＋日記/メンタルヘルス、心理カウンセラーからのメモ、＋IPアドレス

✅日記/メンタルヘルス 記録-standard  flask連携後、再度確認
  参考  https://qiita.com/keimoriyama/items/7c935c91e95d857714fb
  ユーザー機能と紐付け
    画像投稿可能、無制限。
  
✅クエスト  クエストを作って小さい成功を積み重ねる　
  ユーザー機能と紐付け
    L2で作った目標を使う。
      ①協調フィルタリング  同じ性格・同じ目標を持ってる人のデータを選ぶ
        2-6-2の法則で、上位80%以上を「同じ」と定義する
        協調フィルタリングのアルゴリズムはなく、理論のみっぽいのでコレを参考にしてくれhttps://qiita.com/hik0107/items/96c483afd6fb2f077985
        LDA  同じ目標に適応し、同じ単語(タスク内)所持率を計算する
      ②LDA  数値が上昇した日までの、掲示板でのアクション/発言・愚痴・日記単語抜き出し
      ③LSTM(RNN)  単語を突っ込んで、文章を作らせる(提案)。自作して愚痴にも適用
    タスクを作成→1st done、1st done→2nd...のクリアまでの要した日数＋その人のapp内の全ての「行動・興味・発言」を照らし合わせて、対象問題解決に最善の方法を見つける
      最初は目標作成→タスク作成までの日数
      タスク作成 2021.1.1→1st done 2021.1.31=28日(2~30日)+1=30日
      x日内で「行動・興味・発言」掲示板でのアクション/発言＋過去の愚痴＋数値が上昇した日の日記を全て取得→意味のある単語のみ抜き出し→deeplearningで合成したい！

✅掲示板
  ユーザー機能と紐付け
  コメント不可・いいねファボのみ、攻撃的な文はNG
    攻撃的な発言をした場合  投稿機能自体はさせるけど、表示はさせずに、ユーザーの平均スコア-5%を下げる。＋DBに記録として挿入（新しいscore、発言内容）
    50%切ったら悪い単語を３回使ったら3日停止、アンガーマネジメントプログラムを実行させる
  アンガーマネジメントプログラム  心を落ち着かせる方法をexcelに記載しランダムに抽出。もしかしたらアルゴリズムで関連づけることができるかも？

✅会話  with 心理カウンセラー
  ユーザー機能と紐付け
    チャット形式、ビデオ電話、電話のどれかでメンターと連絡をとる
    会話のログは取らない。メンターに話した内容を記載させる（DB：Psych Counselor's Notes）
    通信関連(websocket)はflask立ち上げ後に確認する。スマホとPCで確認する
    ビデオ電話・電話は音声も確認すること
    ２人以上の乱入防止。同じチャットルームに２人が入れるか、つまり互換性を持たせる。
      チャット形式  文字起こし、メンターは緑/患者は白
      ビデオ電話  右下に自分の顔が見えて、９割は相手の顔。終了ボタンを作るべき？
      電話
    メンターにユーザーの情報開示
      l1_user text/created_on、l2_personality record、l2_endg end_goal/end_goals_tasks、
      l3_bullentin_boadrd_text bbs_txt_text、l3_bullentin_board_act bbs_act



[追加機能]
✅twmc
  ユーザーがchatを起動したら、管理ページに部屋が表示される
  対応中か否かを表示する
  ユーザーの情報の汚さを改善する
・ajaxを実装、画像クリックしたら拡大、ページネーション、新規登録の部分変更
・チェックボックスでブラウザ終了時にDBに保存する？
・サンプルをDBに入れるべし
・データベースのバックアップ方法ggr

・電話  https://qiita.com/mobilebiz/items/5a39aef62d0ad9070d02
・パラメータ自動エスケープ  https://qiita.com/yoichi22/items/56cc3d8e243e137a254c

・Flask
	✅Flask(python)/Foundation(html)
  ・自分で機能をカスタマイズできるようにする（ならび的な）
  ・メインメニューみたいなのが必要かも。コントロールバーみたいな
  ・画像入れれるようにする/事前に選べる画像をいくつか選択しておきたい
  ・できる限りのCSS/アニメーション/できる限りの全てにajaxを。
  ・AI文字自動作成のやつ
    ボタンを押せば生成する、ページを開いた時に以前のものを書き出すようにしたい
  ・画像  クリックしたら拡大



[TO DO]
セキュリティー対策
  自分でできるやつ
  ・エスケープ処理
      やばいやつだけ文字化けさせたけど、直前で変換させただけ
      直前よりも前に何度か処理するべき？
  ・XSS
      ✅バリデーション  入力値制限
        →flask-wtfというライブラリで対応
      ✅サニタイズ  全ての記号を無意味な文字に変換する。
        妙なコードを埋め込まれる可能性を無くす
        →bleachというライブラリがあるのでそれを使用
  ・SQLインジェクション
      ✅プリペアドステートメント（プレースホルダ？）想定外のSQL実行文をさせない
	    （プレースホルダーがpythonだと%sがそれ？プレペアryが下書きSQL文みたいなやつ？）
		  DBの実行コードでwhere=で使うクォーテーションをなくすとエスケープする
		    →ipのようにxx.xx.x.xのような点を複数含む場合はSQLが実行できないので不可
	      だったが、sql実行文と値で別々にすればクォーテーション外せたのでOK
      webサイトへのアクセス監視
        ハニーポット(ハッカーとか感染者からの攻撃歴を可視化させたり、罠を設置したりする)
        cowrie  自身のPCに対しての攻撃の可視化？
	  ・セキュリティー巡回bot
          不正なアクセスがあれば直ちにサイトを止める
          URLからも入れるそうな？

    >>web屋に頼むやつ  スキャナ？
      WAFの導入（アプライアンス/ハードウェア型、ソフトウェア型、クラウド型）
        クラウド型WAF→XSS対策、
      脆弱性診断サービス
      webサイトへのアクセス監視
      コードを１度でも入力されたらIPアドレス・位置情報をgetし、ユーザー出禁。メアド、SNSも取れるのか？

    htmlのtextボックスをいじる
  ダミーを掴ませる

  SQLのCREATEの定義から見直し
    varcharを廃止とか
  入力された文字を独自の暗号化ルールに沿って変換する
    自然言語処理？





・セキュリティ参考
SQLインジェンクション対策  https://html-coding.co.jp/knowhow/security/sql/　　　
位置情報取得  https://teratail.com/questions/214826


・メンタルヘルス データベース
  ・鬱  人の行動レベル
    https://www.beyondblue.org.au/the-facts/anxiety-and-depression-checklist-k10
    https://utsu.ne.jp/depression/correlation/life/
      具体的な解決方法提案
  ・悩み・愚痴  SNSから取得できる？連携？
    済単語リスト  鬱  https://myvocabulary.com/word-list/depression-vocabulary/
    単語リスト  ネガ感情  https://myvocabulary.com/word-list/emotions-feelings-mood-vocabulary/
    単語リスト  いじめ  https://myvocabulary.com/word-list/bullying-and-gangs-vocabulary/
      愚痴聞きAIの入力されたテキストから病み度判定
    ツイートタイムライン Talklifeから抜粋 50件
  ・対象の性格(デフォのキャパシティを判断)
    まじめで・責任感が強く・完ぺき主義で・人からの評価も高く・道徳観も強い人
    https://www.verywellmind.com/personality-trait-versus-mood-state-1067551#:~:text=Specific%20traits%20that%20are%20linked,is%20(or%20isn't)




年収と鬱はリンクしている
鬱になると、そのコミュニティのアプリに行く。twitterとかの外の人間と関わるアプリは使わない。けど、話は聞いてほしい。
人間関係で失敗したっぽい人が多い？



研究対象
・tensflowとkmean?のアルゴリズム
・ipアドレスの獲得方法
・チャットルームの鯖接続関連
・音声取得
・秘密キー生成/解読関連
- 一般的なセキュリティの認識と、一般的なセキュリティの欠陥（インジェクション、CSRF、DoS攻撃、パラメータの改ざん、中間者攻撃）を防止する方法の基本的な理解
- 暗号通貨またはブロックチェーンに関する知識